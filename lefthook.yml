pre-commit:
  parallel: true
  commands:
    # 未使用コード検出（ステージされた対象拡張子に限定）
    knip:
      run: npm run knip -- --fix
      glob: "*.{js,ts,jsx,tsx}"

    # Lint（Biomeを直叩き／ステージされたファイルのみ渡す）
    lint:
      run: npx biome check --write {staged_files}
      glob: "*.{js,ts,jsx,tsx}"

    # 整形（任意。lintだけで十分なら消してOK）
    format:
      run: npx biome format --write {staged_files}
      glob: "*.{js,ts,jsx,tsx}"

    # Storybookの型チェック（storiesに変更があるときだけ）
    typecheck_stories:
      run: npm run typecheck:stories
      glob: "*.stories.tsx"

    # コンポーネントに対応するストーリーの有無チェック
    check_stories:
      run: npm run check-stories
      glob: "src/components/**/*.tsx"

# pre-push は軽く：型チェックだけ
pre-push:
  parallel: true
  commands:
    typecheck:
      run: npm run typecheck